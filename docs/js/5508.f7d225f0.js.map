{"version":3,"file":"js/5508.f7d225f0.js","mappings":"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","sources":["webpack://@radiantearth/stac-browser/./src/views/Search.vue","webpack://@radiantearth/stac-browser/src/views/Search.vue","webpack://@radiantearth/stac-browser/./src/views/Search.vue?713d","webpack://@radiantearth/stac-browser/./src/views/Search.vue?1f58"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('main',{staticClass:\"search d-flex flex-column\"},[(!_vm.parent)?_c('Loading',{attrs:{\"stretch\":\"\"}}):(!_vm.searchLink)?_c('b-alert',{attrs:{\"variant\":\"danger\",\"show\":\"\"}},[_vm._v(_vm._s(_vm.$t('search.notSupported')))]):_c('b-row',[_c('b-col',{staticClass:\"left\"},[_c('b-tabs',{model:{value:(_vm.activeSearch),callback:function ($$v) {_vm.activeSearch=$$v},expression:\"activeSearch\"}},[(_vm.collectionSearch)?_c('b-tab',{attrs:{\"title\":_vm.$t('search.tabs.collections')}},[_c('SearchFilter',{attrs:{\"parent\":_vm.parent,\"title\":\"\",\"value\":_vm.collectionFilters,\"type\":\"Collections\"},on:{\"input\":_vm.setFilters}})],1):_vm._e(),(_vm.itemSearch)?_c('b-tab',{attrs:{\"title\":_vm.$t('search.tabs.items')}},[_c('SearchFilter',{attrs:{\"parent\":_vm.parent,\"title\":\"\",\"value\":_vm.itemFilters,\"type\":\"Global\"},on:{\"input\":_vm.setFilters}})],1):_vm._e()],1)],1),_c('b-col',{staticClass:\"right\"},[(_vm.error)?_c('b-alert',{attrs:{\"variant\":\"error\",\"show\":\"\"}},[_vm._v(_vm._s(_vm.error))]):(!_vm.data && _vm.loading)?_c('Loading',{attrs:{\"fill\":\"\",\"top\":\"\"}}):(_vm.data === null)?_c('b-alert',{attrs:{\"variant\":\"info\",\"show\":\"\"}},[_vm._v(_vm._s(_vm.$t('search.modifyCriteria')))]):(_vm.results.length === 0 && _vm.noFurtherItems)?_c('b-alert',{attrs:{\"variant\":\"info\",\"show\":\"\"}},[_vm._v(_vm._s(_vm.$t('search.noFurtherItemsFound')))]):(_vm.results.length === 0)?_c('b-alert',{attrs:{\"variant\":\"warning\",\"show\":\"\"}},[_vm._v(_vm._s(_vm.$t('search.noItemsFound')))]):[(_vm.itemCollection)?_c('div',{attrs:{\"id\":\"search-map\"}},[_c('Map',{attrs:{\"stac\":_vm.stac,\"stacLayerData\":_vm.itemCollection,\"scrollWheelZoom\":\"\",\"popover\":\"\"}})],1):_vm._e(),(_vm.isCollectionSearch)?_c('Catalogs',{attrs:{\"catalogs\":_vm.results,\"collectionsOnly\":\"\",\"pagination\":_vm.pagination,\"loading\":_vm.loading,\"count\":_vm.totalCount},on:{\"paginate\":_vm.loadResults},scopedSlots:_vm._u([{key:\"catalogFooter\",fn:function(slot){return [(_vm.itemSearch || _vm.canFilterItems(slot.data))?_c('b-button-group',{attrs:{\"vertical\":\"\",\"size\":\"sm\"}},[(_vm.itemSearch)?_c('b-button',{attrs:{\"variant\":\"outline-primary\",\"pressed\":_vm.selectedCollections[slot.data.id]},on:{\"click\":function($event){return _vm.selectForItemSearch(slot.data)}}},[(_vm.selectedCollections[slot.data.id])?_c('b-icon-check-square'):_c('b-icon-square'),_c('span',{staticClass:\"ml-2\"},[_vm._v(_vm._s(_vm.$t('search.selectForItemSearch')))])],1):_vm._e(),_c('StacLink',{attrs:{\"button\":{variant: 'outline-primary', disabled: !_vm.canFilterItems(slot.data)},\"data\":slot.data,\"title\":_vm.$t('search.filterCollection'),\"state\":{itemFilterOpen: 1}}})],1):_vm._e()]}}],null,false,970447694)}):_c('Items',{attrs:{\"stac\":_vm.stac,\"items\":_vm.results,\"api\":true,\"allowFilter\":false,\"pagination\":_vm.pagination,\"loading\":_vm.loading,\"count\":_vm.totalCount},on:{\"paginate\":_vm.loadResults}})]],2)],1),(_vm.selectedCollectionCount > 0)?_c('b-alert',{staticClass:\"selected-collections-action\",attrs:{\"show\":\"\",\"variant\":\"dark\"}},[_c('b-button',{attrs:{\"variant\":\"primary\",\"size\":\"lg\"},on:{\"click\":_vm.openItemSearch}},[_vm._v(\" \"+_vm._s(_vm.$tc('search.useInItemSearch', _vm.selectedCollectionCount, {count: _vm.selectedCollectionCount}))+\" \")])],1):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <main class=\"search d-flex flex-column\">\r\n    <Loading v-if=\"!parent\" stretch />\r\n    <b-alert v-else-if=\"!searchLink\" variant=\"danger\" show>{{ $t('search.notSupported') }}</b-alert>\r\n    <b-row v-else>\r\n      <b-col class=\"left\">\r\n        <b-tabs v-model=\"activeSearch\">\r\n          <b-tab v-if=\"collectionSearch\" :title=\"$t('search.tabs.collections')\">\r\n            <SearchFilter\r\n              :parent=\"parent\" title=\"\" :value=\"collectionFilters\" type=\"Collections\"\r\n              @input=\"setFilters\"\r\n            />\r\n          </b-tab>\r\n          <b-tab v-if=\"itemSearch\" :title=\"$t('search.tabs.items')\">\r\n            <SearchFilter\r\n              :parent=\"parent\" title=\"\" :value=\"itemFilters\" type=\"Global\"\r\n              @input=\"setFilters\"\r\n            />\r\n          </b-tab>\r\n        </b-tabs>\r\n      </b-col>\r\n      <b-col class=\"right\">\r\n        <b-alert v-if=\"error\" variant=\"error\" show>{{ error }}</b-alert>\r\n        <Loading v-else-if=\"!data && loading\" fill top />\r\n        <b-alert v-else-if=\"data === null\" variant=\"info\" show>{{ $t('search.modifyCriteria') }}</b-alert>\r\n        <b-alert v-else-if=\"results.length === 0 && noFurtherItems\" variant=\"info\" show>{{ $t('search.noFurtherItemsFound') }}</b-alert>\r\n        <b-alert v-else-if=\"results.length === 0\" variant=\"warning\" show>{{ $t('search.noItemsFound') }}</b-alert>\r\n        <template v-else>\r\n          <div id=\"search-map\" v-if=\"itemCollection\">\r\n            <Map :stac=\"stac\" :stacLayerData=\"itemCollection\" scrollWheelZoom popover />\r\n          </div>\r\n          <Catalogs\r\n            v-if=\"isCollectionSearch\" :catalogs=\"results\" collectionsOnly\r\n            :pagination=\"pagination\" :loading=\"loading\" @paginate=\"loadResults\"\r\n            :count=\"totalCount\"\r\n          >\r\n            <template #catalogFooter=\"slot\">\r\n              <b-button-group v-if=\"itemSearch || canFilterItems(slot.data)\" vertical size=\"sm\">\r\n                <b-button v-if=\"itemSearch\" variant=\"outline-primary\" :pressed=\"selectedCollections[slot.data.id]\" @click=\"selectForItemSearch(slot.data)\">\r\n                  <b-icon-check-square v-if=\"selectedCollections[slot.data.id]\" />\r\n                  <b-icon-square v-else />\r\n                  <span class=\"ml-2\">{{ $t('search.selectForItemSearch') }}</span>\r\n                </b-button>\r\n                <StacLink :button=\"{variant: 'outline-primary', disabled: !canFilterItems(slot.data)}\" :data=\"slot.data\" :title=\"$t('search.filterCollection')\" :state=\"{itemFilterOpen: 1}\" />\r\n              </b-button-group>\r\n            </template>\r\n          </Catalogs>\r\n          <Items\r\n            v-else\r\n            :stac=\"stac\" :items=\"results\" :api=\"true\" :allowFilter=\"false\"\r\n            :pagination=\"pagination\" :loading=\"loading\" @paginate=\"loadResults\"\r\n            :count=\"totalCount\"\r\n          />\r\n        </template>\r\n      </b-col>\r\n    </b-row>\r\n    <b-alert v-if=\"selectedCollectionCount > 0\" show variant=\"dark\" class=\"selected-collections-action\">\r\n      <b-button @click=\"openItemSearch\" variant=\"primary\" size=\"lg\">\r\n        {{ $tc('search.useInItemSearch', selectedCollectionCount, {count: selectedCollectionCount}) }}\r\n      </b-button>\r\n    </b-alert>\r\n  </main>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapState } from \"vuex\";\r\nimport Utils from '../utils';\r\nimport SearchFilter from '../components/SearchFilter.vue';\r\nimport Loading from '../components/Loading.vue';\r\nimport STAC from '../models/stac';\r\nimport { BIconCheckSquare, BIconSquare, BTabs, BTab } from 'bootstrap-vue';\r\nimport { processSTAC, stacRequest } from '../store/utils';\r\n\r\nexport default {\r\n  name: \"Search\",\r\n  components: {\r\n    BIconCheckSquare,\r\n    BIconSquare,\r\n    BTab,\r\n    BTabs,\r\n    Catalogs: () => import('../components/Catalogs.vue'),\r\n    Loading,\r\n    Items: () => import('../components/Items.vue'),\r\n    Map: () => import('../components/Map.vue'),\r\n    SearchFilter,\r\n    StacLink: () => import('../components/StacLink.vue')\r\n  },\r\n  props: {\r\n    loadParent: {\r\n      type: String,\r\n      default: null\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      parent: null,\r\n\r\n      error: null,\r\n      link: null,\r\n      loading: false,\r\n      data: null,\r\n\r\n      itemFilters: {},\r\n      collectionFilters: {},\r\n      activeSearch: 0,\r\n      selectedCollections: {}\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapState(['catalogUrl', 'catalogTitle', 'itemsPerPage']),\r\n    ...mapGetters(['canSearchItems', 'canSearchCollections', 'getStac', 'root', 'collectionLink', 'parentLink', 'fromBrowserPath', 'toBrowserPath']),\r\n    selectedCollectionCount() {\r\n      return Utils.size(this.selectedCollections);\r\n    },\r\n    totalCount() {\r\n      if (typeof this.data.numberMatched === 'number') {\r\n        return this.data.numberMatched;\r\n      }\r\n      return null;\r\n    },\r\n    stac() {\r\n      if (this.parent instanceof STAC) {\r\n        return this.parent;\r\n      }\r\n      return null;\r\n    },\r\n    searchLink() {\r\n      return this.isCollectionSearch ? this.collectionSearch : this.itemSearch;\r\n    },\r\n    collectionSearch() {\r\n      return this.canSearchCollections && this.parent instanceof STAC && this.parent.getApiCollectionsLink();\r\n    },\r\n    itemSearch() {\r\n      return this.canSearchItems && this.parent instanceof STAC && this.parent.getSearchLink();\r\n    },\r\n    itemCollection() {\r\n      if (this.isCollectionSearch) {\r\n        return null; // wait for stac-js to convert bboxes to geojson\r\n      }\r\n      return {\r\n        type: 'FeatureCollection',\r\n        features: this.results,\r\n        links: []\r\n      };\r\n    },\r\n    results() {\r\n      if (Utils.size(this.data) === 0) {\r\n        return [];\r\n      }\r\n      let list = this.isCollectionSearch ? this.data.collections : this.data.features;\r\n      let type = this.isCollectionSearch ? 'Collection' : 'Feature';\r\n      if (!Array.isArray(list)) {\r\n        return [];\r\n      }\r\n      return list\r\n        .map(obj => {\r\n          try {\r\n            if (!Utils.isObject(obj) || obj.type !== type) {\r\n              return null;\r\n            }\r\n            let selfLink = Utils.getLinkWithRel(obj.links, 'self');\r\n            let url;\r\n            if (selfLink?.href) {\r\n              url = Utils.toAbsolute(selfLink.href, this.link.href);\r\n            }\r\n            let stac = new STAC(obj, url, this.toBrowserPath(url));\r\n            stac = processSTAC(this.$store.state, stac);\r\n            return stac;\r\n          } catch (error) {\r\n            console.error(error);\r\n            return null;\r\n          }\r\n        })\r\n        .filter(obj => obj instanceof STAC);\r\n    },\r\n    pagination() {\r\n      return Utils.getPaginationLinks(this.data);\r\n    },\r\n    filters() {\r\n      return this.isCollectionSearch ? this.collectionFilters : this.itemFilters;\r\n    },\r\n    isCollectionSearch() {\r\n      return this.collectionSearch && this.activeSearch === 0;\r\n    },\r\n    pageDescription() {\r\n      let title = STAC.getDisplayTitle([this.collectionLink, this.parentLink, this.root], this.catalogTitle);\r\n      return this.$t('search.metaDescription', {title});\r\n    },\r\n    noFurtherItems() {\r\n      // Ideally this would be dertmined by the prev link, but it's not required\r\n      // so we check whether our current link has a next rel type which indicates\r\n      // that it's a subsequent page. On the first pages the link rel type would be\r\n      // \"search\" (or \"prev\" or \"first\"). This only works for forward navigation.\r\n      return this.link.rel === 'next';\r\n    }\r\n  },\r\n  watch:{\r\n    activeSearch() {\r\n      this.data = null;\r\n    },\r\n    searchLink: {\r\n      immediate: true,\r\n      handler() {\r\n        if (this.searchLink) {\r\n          this.showPage();\r\n        }\r\n      }\r\n    }\r\n  },\r\n  async created() {\r\n    let url = this.catalogUrl;\r\n    if (this.loadParent) {\r\n      url = this.fromBrowserPath(this.loadParent);\r\n      this.parent = this.getStac(url);\r\n    }\r\n    else {\r\n      this.parent = this.root;\r\n    }\r\n    if (!this.parent) {\r\n      await this.$store.dispatch('load', { url });\r\n      if (!this.root) {\r\n        await this.$store.dispatch(\"config\", { catalogUrl: url });\r\n      }\r\n      this.parent = this.getStac(url);\r\n      this.showPage();\r\n    }\r\n    \r\n    // Fixes https://github.com/radiantearth/stac-browser/issues/428\r\n    this.$root.$on('uiLanguageChanged', () => {\r\n      this.$store.commit('setPageMetadata', {\r\n        title: this.$t('search.title'),\r\n        description: this.pageDescription\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    openItemSearch() {\r\n      this.$set(this.itemFilters, 'collections', Object.keys(this.selectedCollections));\r\n      this.activeSearch = 1;\r\n      this.selectedCollections = {};\r\n    },\r\n    selectForItemSearch(collection) {\r\n      if (this.selectedCollections[collection.id]) {\r\n        this.$delete(this.selectedCollections, collection.id);\r\n      }\r\n      else {\r\n        this.$set(this.selectedCollections, collection.id, true);\r\n      }\r\n    },\r\n    canFilterItems(data) {\r\n      if (data instanceof STAC) {\r\n        return Boolean(data.getApiItemsLink());\r\n      }\r\n      return false;\r\n    },\r\n    async loadResults(link) {\r\n      this.error = null;\r\n      this.loading = true;\r\n      try {\r\n        this.link = Utils.addFiltersToLink(link, this.filters, this.itemsPerPage);\r\n\r\n        let key = this.isCollectionSearch ? 'collections' : 'features';\r\n        let response = await stacRequest(this.$store, this.link);\r\n        if (response) {\r\n          this.showPage(response.config.url);\r\n        }\r\n        if (!Utils.isObject(response.data) || !Array.isArray(response.data[key])) {\r\n          this.data = {};\r\n          this.error = this.$t(this.isCollectionSearch ? 'errors.invalidStacCollections' : 'errors.invalidStacItems');\r\n        }\r\n        else {\r\n          this.data = response.data;\r\n        }\r\n      } catch (error) {\r\n        this.data = {};\r\n        this.error = error.message;\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    async setFilters(filters, reset = false) {\r\n      if (this.isCollectionSearch) {\r\n        this.collectionFilters = filters;\r\n      }\r\n      else {\r\n        this.itemFilters = filters;\r\n      }\r\n      if (reset) {\r\n        this.data = null;\r\n      }\r\n      else {\r\n        await this.loadResults(this.searchLink);\r\n      }\r\n    },\r\n    showPage(url) {\r\n      this.$store.commit('showPage', {\r\n        title: this.$t('search.title'),\r\n        description: this.pageDescription,\r\n        url\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import '~bootstrap/scss/mixins';\r\n@import \"../theme/variables.scss\";\r\n\r\n#stac-browser {\r\n  .search .left .tabs .tab-content .filter .card {\r\n    border-top: 0;\r\n    border-top-left-radius: 0;\r\n    border-top-right-radius: 0;\r\n  }\r\n}\r\n\r\n#stac-browser .search {\r\n  .selected-collections-action {\r\n    position: fixed;\r\n    bottom: 0;\r\n    right: 0;\r\n    z-index: 5000;\r\n    margin: 1rem;\r\n    box-shadow: 2px 2px 4px 0px rgba(0, 0, 0, 0.25);\r\n  }\r\n\r\n  .left {\r\n    min-width: 350px;\r\n    flex-basis: 40%;\r\n  }\r\n  .right {\r\n    min-width: 250px;\r\n    flex-basis: 60%;\r\n    position: relative !important;\r\n  }\r\n  .items, .catalogs {\r\n    .card-columns {\r\n      @include media-breakpoint-only(sm) {\r\n        column-count: 1;\r\n      }\r\n      @include media-breakpoint-only(md) {\r\n        column-count: 2;\r\n      }\r\n      @include media-breakpoint-only(lg) {\r\n        column-count: 2;\r\n      }\r\n      @include media-breakpoint-only(xl) {\r\n        column-count: 2;\r\n      }\r\n      @include media-breakpoint-only(xxl) {\r\n        column-count: 3;\r\n      }\r\n      @include media-breakpoint-up(xxxl) {\r\n        column-count: 4;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=956d069e\"\nimport script from \"./Search.vue?vue&type=script&lang=js\"\nexport * from \"./Search.vue?vue&type=script&lang=js\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&id=956d069e&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","parent","searchLink","model","value","activeSearch","callback","$$v","expression","collectionSearch","attrs","$t","collectionFilters","on","setFilters","_e","itemSearch","itemFilters","error","_v","_s","data","loading","results","length","noFurtherItems","itemCollection","stac","isCollectionSearch","pagination","totalCount","loadResults","scopedSlots","_u","key","fn","slot","canFilterItems","selectedCollections","id","$event","selectForItemSearch","variant","disabled","itemFilterOpen","selectedCollectionCount","openItemSearch","$tc","count","staticRenderFns","name","components","BIconCheckSquare","BIconSquare","BTab","BTabs","Catalogs","Loading","Items","Map","SearchFilter","StacLink","props","loadParent","type","String","default","link","computed","mapState","mapGetters","Utils","size","numberMatched","STAC","canSearchCollections","getApiCollectionsLink","canSearchItems","getSearchLink","features","links","list","collections","Array","isArray","map","obj","isObject","url","selfLink","getLinkWithRel","href","toAbsolute","toBrowserPath","processSTAC","$store","state","console","filter","getPaginationLinks","filters","pageDescription","title","getDisplayTitle","collectionLink","parentLink","root","catalogTitle","rel","watch","immediate","handler","showPage","created","catalogUrl","fromBrowserPath","getStac","dispatch","$root","$on","commit","description","methods","$set","Object","keys","collection","$delete","Boolean","getApiItemsLink","addFiltersToLink","itemsPerPage","response","stacRequest","config","message","reset","component"],"sourceRoot":""}